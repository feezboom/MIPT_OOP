1) Не импортирован atomic
2) Флажок одноразовый. При одноразовом использовании работает корректно.
3) Атомарность выполняется.
- Никакая переменная не может быть изменена не атомарно, т.к ready_.store && ready_.load атомарны.
- Пока флаг не установлен ни один поток не пройдёт через вызов wait, т.к. будет зациклен в while(!ready_.load()) {}
- как только кто-либо вызовет set, ready_ изменится и все спящие уведомятся и пройдут через set.
